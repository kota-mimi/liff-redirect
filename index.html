<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LIFF Redirect</title>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
</head>
<body>
<script>
(async () => {
  const LIFF_ID = "2007900002-JdARGprl"; // あなたのLIFF ID
  const GAS_URL = "https://script.google.com/macros/s/AKfycbxpEW9vA8WEvFYevhIA-xK7akHzNgCQ3JRHBAdDh1fX8FtC6RTO5yeVjgaspTFLS5f8uw/exec";

  try {
    await liff.init({ liffId: LIFF_ID });
    await liff.ready;

    // userId取得
    const profile = await liff.getProfile();
    const userId = profile.userId;

    if (!userId) {
      document.body.innerHTML = "userIdが取得できません。LINEアプリ内でBot連携して開いてください。";
      return;
    }

    // GASへ転送（キャッシュ回避のためtを付ける）
    location.replace(`${GAS_URL}?userId=${encodeURIComponent(userId)}&t=${Date.now()}`);

  } catch (e) {
    document.body.innerHTML = (e && e.message) ? e.message : String(e);
  }
})();
</script>
</body>
</html>
