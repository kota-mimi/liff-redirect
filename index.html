<!doctype html><html lang="ja"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>LIFF Redirect</title>
<script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
</head><body><script>
(async () => {
  const LIFF_ID = "2007900637-3EJ7L5r4"; // ← 最新のLIFF ID
  const GAS_URL = "https://script.google.com/macros/s/＜あなたの最新exec＞/exec"; // ← 今デプロイしたURL

  const show = (m)=>document.body.innerHTML='<pre style="white-space:pre-wrap;word-break:break-all">'+m+'</pre>';
  try {
    await liff.init({ liffId: LIFF_ID });
    if (!liff.isLoggedIn()) { liff.login(); return; }
    await liff.ready;

    const p = await liff.getProfile();
    const userId = p?.userId;
    if (!userId) { show("userIdを取得できませんでした。"); return; }

    location.replace(`${GAS_URL}?userId=${encodeURIComponent(userId)}&page=view&t=${Date.now()}`);
  } catch(e) { show("LIFF初期化エラー: " + (e?.message||String(e))); }
})();
</script></body></html>
