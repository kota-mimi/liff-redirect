<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ãƒã‚¤ãƒšãƒ¼ã‚¸</title>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <style>
    :root{
      --brand:#1086ff; /* é’ */
      --ink:#111; --muted:#6b7280; --line:#e5e7eb; --bg:#fff;
    }
    *{box-sizing:border-box} body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Hiragino Sans",Meiryo,sans-serif;background:var(--bg);color:var(--ink)}
    /* ãƒ˜ãƒƒãƒ€ãƒ¼ */
    .header{position:sticky;top:0;z-index:20;background:#fff;border-bottom:1px solid var(--line)}
    .header-inner{display:flex;align-items:center;justify-content:space-between;max-width:560px;margin:0 auto;padding:12px 16px}
    .appname{font-size:18px;font-weight:700}
    .brand{display:block;margin:12px auto 4px;width:110px;opacity:.9}
    .subtitle{color:var(--muted);font-size:13px;text-align:center;margin-bottom:12px}
    .menu-btn{width:36px;height:36px;border-radius:10px;border:1px solid var(--line);display:grid;place-items:center;cursor:pointer;background:#fff}
    .menu-btn span{display:block;width:18px;height:2px;background:#333;position:relative}
    .menu-btn span::before,.menu-btn span::after{content:"";position:absolute;left:0;width:18px;height:2px;background:#333}
    .menu-btn span::before{top:-6px}.menu-btn span::after{top:6px}

    /* ã‚¿ã‚¤ãƒ« */
    .wrap{max-width:560px;margin:0 auto;padding:12px 16px 24px}
    .section-title{font-size:18px;font-weight:700;color:#2480e6;margin:8px 0 12px;padding-top:6px;border-top:1px solid var(--line)}
    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:14px}
    .tile{border:1px solid var(--line);border-radius:14px;padding:14px 8px;text-align:center;cursor:pointer;transition:transform .06s}
    .tile:active{transform:scale(.98)}
    .tile-icon{font-size:28px;line-height:1.1}
    .tile-label{margin-top:8px;font-size:13px;color:#2c6da8}

    /* æ¨ªé•·ãƒœã‚¿ãƒ³ */
    .wide{margin-top:18px;border:1px solid var(--line);border-radius:12px;padding:14px 12px;display:flex;gap:12px;align-items:center;cursor:pointer}
    .wide .ico{font-size:22px}
    .wide .txt{color:#2c6da8;font-weight:600}

    /* ãƒ‰ãƒ­ãƒ¯ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ */
    .drawer{position:fixed;inset:0;z-index:40;display:none}
    .drawer.active{display:block}
    .scrim{position:absolute;inset:0;background:rgba(0,0,0,.3)}
    .panel{position:absolute;top:0;right:0;width:78%;max-width:360px;height:100%;background:#fff;border-left:1px solid var(--line);display:flex;flex-direction:column}
    .panel h3{margin:14px 16px;font-size:16px;color:#2480e6}
    .list{padding:8px 0}
    .item{display:flex;align-items:center;gap:10px;padding:14px 16px;border-top:1px solid var(--line);cursor:pointer}
    .item:first-child{border-top:none}
    .item .i{font-size:18px;width:22px;text-align:center}
    .item .t{font-size:15px}
  </style>
</head>
<body>
  <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
  <div class="header">
    <div class="header-inner">
      <div class="appname">Zoff Membership é¢¨</div>
      <button id="menuBtn" class="menu-btn" aria-label="ãƒ¡ãƒ‹ãƒ¥ãƒ¼"><span></span></button>
    </div>
    <img class="brand" src="https://dummyimage.com/300x80/1086ff/ffffff&text=Your+Logo" alt="Brand" />
    <div class="subtitle">ãƒã‚¤ãƒšãƒ¼ã‚¸</div>
  </div>

  <!-- ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
  <div class="wrap">
    <div class="section-title">ã‚¯ã‚¤ãƒƒã‚¯ãƒ¡ãƒ‹ãƒ¥ãƒ¼</div>
    <div class="grid">
      <div class="tile" data-to="profile"><div class="tile-icon">ğŸ‘¤</div><div class="tile-label">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«</div></div>
      <div class="tile" data-to="counsel"><div class="tile-icon">ğŸ“</div><div class="tile-label">ã‚«ã‚¦ãƒ³ã‚»ãƒªãƒ³ã‚°</div></div>
      <div class="tile" data-to="edit"><div class="tile-icon">âœï¸</div><div class="tile-label">æƒ…å ±ç·¨é›†</div></div>
      <div class="tile" data-to="weight"><div class="tile-icon">âš–ï¸</div><div class="tile-label">ä½“é‡ã‚°ãƒ©ãƒ•</div></div>
      <div class="tile" data-to="record"><div class="tile-icon">â•</div><div class="tile-label">ä½“é‡è¨˜éŒ²</div></div>
      <div class="tile" data-to="help"><div class="tile-icon">â“</div><div class="tile-label">ãƒ˜ãƒ«ãƒ—</div></div>
    </div>

    <div class="wide" data-to="orders"><div class="ico">ğŸ‘“</div><div class="txt">ã”æ³¨æ–‡å•†å“ä¸€è¦§</div></div>
  </div>

  <!-- ãƒ‰ãƒ­ãƒ¯ãƒ¼ -->
  <div id="drawer" class="drawer" aria-hidden="true">
    <div class="scrim"></div>
    <aside class="panel">
      <h3>ãƒ¡ãƒ‹ãƒ¥ãƒ¼</h3>
      <nav class="list">
        <div class="item" data-to="profile"><div class="i">ğŸ‘¤</div><div class="t">ä¼šå“¡æƒ…å ±ï¼ˆãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ï¼‰</div></div>
        <div class="item" data-to="counsel"><div class="i">ğŸ“</div><div class="t">ã‚«ã‚¦ãƒ³ã‚»ãƒªãƒ³ã‚°è©³ç´°</div></div>
        <div class="item" data-to="edit"><div class="i">âœï¸</div><div class="t">ç™»éŒ²æƒ…å ±ç·¨é›†</div></div>
        <div class="item" data-to="weight"><div class="i">ğŸ“ˆ</div><div class="t">ä½“é‡ã‚°ãƒ©ãƒ•</div></div>
        <div class="item" data-to="record"><div class="i">â•</div><div class="t">ä½“é‡ã‚’è¨˜éŒ²ã™ã‚‹</div></div>
        <div class="item" data-to="help"><div class="i">â“</div><div class="t">ãƒ˜ãƒ«ãƒ— / ãŠå•ã„åˆã‚ã›</div></div>
      </nav>
    </aside>
  </div>

  <script>
    // â–¼ ã“ã“ã ã‘å·®ã—æ›¿ãˆ â–¼
    const LIFF_ID  = "2007900637-3EJ7L5r4"; // ä¾‹: 20079...... æ—¢å­˜ã®ã‚’å…¥ã‚Œã¦OK
    const GAS_BASE = "https://script.google.com/macros/s/AKfycbz038EPCxsiOEeHzohcq1lmhAFlcoIgvaIDjQe7LBvGXvZzPi2Jqj1R0lcMWx6AXLcvLg/exec"; // ä¾‹: https://script.google.com/macros/s/XXXXX/exec
    // â–² ã“ã“ã ã‘å·®ã—æ›¿ãˆ â–²

    // ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ï¼ˆæ—¢å­˜ã®GASãƒšãƒ¼ã‚¸ã¯ãã®ã¾ã¾ä½¿ç”¨ï¼‰
    function routes(userId){
      return {
        profile : `${GAS_BASE}?userId=${encodeURIComponent(userId)}&page=view`,
        counsel : `${GAS_BASE}?userId=${encodeURIComponent(userId)}&page=counseling`,
        edit    : `${GAS_BASE}?userId=${encodeURIComponent(userId)}&page=edit`,
        weight  : `${GAS_BASE}?userId=${encodeURIComponent(userId)}&page=weight`,   // å¾Œã§ä½œã‚‹
        record  : `${GAS_BASE}?userId=${encodeURIComponent(userId)}&page=weight`,   // ç°¡æ˜“å…¥åŠ›ç”¨ã«åŒã˜ã§ã‚‚OK
        orders  : `${GAS_BASE}?userId=${encodeURIComponent(userId)}&page=orders`,   // ã‚ã¨ã§å¢—ç¯‰
        help    : `${GAS_BASE}?userId=${encodeURIComponent(userId)}&page=help`      // ã‚ã¨ã§å¢—ç¯‰
      };
    }

    // LIFF åˆæœŸåŒ– â†’ userIdå–å¾—
    let USER_ID = null, ROUTE = null;
    (async () => {
      await liff.init({ liffId: LIFF_ID });
      if (!liff.isLoggedIn()) return liff.login();
      await liff.ready;
      const profile = await liff.getProfile();
      USER_ID = profile.userId;
      ROUTE = routes(USER_ID);

      // ã‚¯ãƒªãƒƒã‚¯é…ç·š
      document.querySelectorAll('[data-to]').forEach(el=>{
        el.addEventListener('click', ()=> go(el.dataset.to));
      });
    })();

    function go(key){
      if(!ROUTE) return;
      location.href = ROUTE[key]; // åŒã˜LIFFå†…ã§ãã®ã¾ã¾é·ç§»ï¼ˆæ—¢å­˜GASã‚’é–‹ãï¼‰
    }

    // ãƒ‰ãƒ­ãƒ¯ãƒ¼åˆ¶å¾¡
    const drawer = document.getElementById('drawer');
    const btn = document.getElementById('menuBtn');
    btn.addEventListener('click', ()=> drawer.classList.add('active'));
    drawer.addEventListener('click', e=>{
      if(e.target.classList.contains('scrim')) drawer.classList.remove('active');
    });
  </script>
</body>
</html>
